function in$(e,t){for(var n=-1,i=t.length>>>0;++n<i;)if(e===t[n])return!0;return!1}var x$;x$=angular.module("loadingIO"),x$.directive("ldIconPreview",["ldStockPreviewDirective"].concat(function(e){return e("ldi","icon",1)})),x$.controller("ldIconList",["$scope","$http","$timeout","initWrap","Paging","ldNotify"].concat(function(e,t,n,i,o,r){return e.list=[],e.Paging=o,o.limit=64,i=i(),e.iconList=i({offset:0,count:0,hash:{},reset:!0,request:{loading:!1,done:!1,send:function(n){var i=this;return this.done=!1,this.loading=!0,t({url:"/d/request/",method:"POST",data:{keyword:e.iconList.keyword,type:"icon"}})["finally"](function(){return i.done=!0,i.loading=!1,i}).then(function(){return r.send("success","request sent")})["catch"](function(){return r.send("danger","failed to send request. try later?")})}},refetch:function(t){var i=this;return null==t&&(t=800),this.handler&&n.cancel(this.handler),this.handler=n(function(){return e.track("icon","search",i.keyword),i.handler=null,i.clear(),i.fetch()},t)},init:function(){var t,n=this;return(t=/icon\/tag\/(.+)$/.exec(window.location.pathname))&&(this.keyword=decodeURIComponent(t[1])),e.$watch("iconList.keyword",function(e,t){return e||t?n.refetch():void 0}),o.loadOnScroll(function(){return n.fetch()},$("#icon-gallery-end")),this.clear()},clear:function(){return this.reset=!0,this.offset=0,this.count=0,o.end=!1,document.getElementById("icon-gallery").innerHTML=""},setKeyword:function(e){var t;return"string"==typeof e?this.keyword=e:(t=e.target.innerText,t?this.keyword=t:void 0)},fromSlug:function(e){var n=this;return Promise.resolve().then(function(){var i;return(i=n.hash[e])?{data:i}:t({url:"/d/icon/"+e,method:"GET"})}).then(function(e){var t;return t=e.data})},fetch:function(){var e=this;if(!o.end)return this.request.done=!1,o.load(function(n){return t({url:"/d/icon/",method:"GET",params:{limit:64,offset:n.offset,keyword:e.keyword?e.keyword:void 0,iconset:"undefined"!=typeof iconset&&null!==iconset?iconset:void 0}}).then(function(t){var n,i;return n=t.data,e.reset=!1,e.count+=n.length,i=document.getElementById("icon-gallery"),i.innerHTML+=n.map(function(t){return e.hash[t.slug]=t,'<div class="spinner-thumb rel" data-slug="'+t.slug+'">\n  <a><img src="/s/icon/'+t.slug+'.png" alt="'+t.tags+'"/><div class="name">'+t.name+"</div></a>\n</div>"}).join(""),n})["catch"](function(){return console.log("failed")})},500,this.reset)}}),e.edit=function(){},e.iconFromList=function(t){return e.list.filter(function(e){return e.slug===t})[0]},i.run(),e.iconList.fetch()})),x$.controller("ldIconDraft",["$scope","$http","$timeout","ldNotify","initWrap","ldStockController","ldAnimationList"].concat(function(e,t,n,i,o,r,a){var l,s,c,d;return e.editor={},e.loadBySlug=function(t){var n,o;if(t){if(t.target){if(n=t.target,o=n.getAttribute("data-slug")||n.parentNode.getAttribute("data-slug")||n.parentNode.parentNode.getAttribute("data-slug"),!o)return}else o=t;return e.iconList.fromSlug(o).then(function(n){return n?(e.load(n),t&&t.target&&e.track("icon","click-icon",o+" / "+n.name),e.editor.ctrl.toggle(!0),document.querySelector("#icon-editor .stock-title .name").innerText=n.name,document.querySelector("#icon-editor .stock-title .desc .inner").innerHTML=n.tags.map(function(e){return"<span>"+e+"</span>"}).join("")):i.send("danger","Icon has been removed.")})["catch"](function(e){return console.log("failed:",e)})}},n(function(){return window.asset&&window.asset.payload?(e.key=window.asset.key,window.assetConfig=window.asset.payload,window.assetConfig.animation&&(window.assetConfig.animation=e.animation.options.filter(function(e){return e.name===window.assetConfig.animation.name})[0]),e.loadBySlug(window.asset.payload.slug)):void 0},100),e.animation=a,l={settings:{size:200}},e.curIcon=null,r(e,"ldi","icon",l),s={"ld-static":{data:""}},c=document.getElementById("dom-holder"),c.innerHTML=' <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"> <style type="text/css"> .st0{fill:#E23326;} .st1{fill:#781E19;} .st2{fill:#D9BCB4;} </style> <g> <path class="st0" d="M10.7,73C7,73,4,69.9,4,66.2v-26l27.5,17.1c0.7,0.5,1.5,0.7,2.4,0.7c0.8,0,1.7-0.2,2.4-0.7l27.5-17.1v26 c0,3.7-3,6.7-6.7,6.7H10.7z"/> <path d="M62.8,42v24.2c0,3.2-2.6,5.7-5.7,5.7H10.7C7.6,72,5,69.4,5,66.2V42l26,16.2c0.9,0.6,1.9,0.8,2.9,0.8c1,0,2-0.3,2.9-0.8 L62.8,42 M64.8,38.4l-3.1,1.9l-26,16.2c-0.6,0.4-1.2,0.5-1.9,0.5s-1.3-0.2-1.9-0.5l-26-16.2L3,38.4V42v24.2c0,4.3,3.5,7.7,7.7,7.7 H57c4.3,0,7.7-3.5,7.7-7.7V42V38.4L64.8,38.4z"/> </g> <g> <path class="st1" d="M33.9,54.8c-1.2,0-2.3-0.3-3.3-0.9L8.3,40C5.6,38.3,4,35.4,4,32.3C4,29.4,6.3,27,9.2,27h49.3 c2.9,0,5.2,2.3,5.2,5.2c0,3.2-1.6,6.1-4.3,7.7L37.2,53.9C36.2,54.5,35,54.8,33.9,54.8z"/> <path d="M58.5,28c2.3,0,4.2,1.9,4.2,4.2c0,2.8-1.4,5.4-3.8,6.9L36.6,53c-0.8,0.5-1.8,0.8-2.7,0.8S32,53.6,31.1,53L8.8,39.2 C6.4,37.7,5,35.1,5,32.3C5,29.9,6.9,28,9.2,28H58.5 M58.5,26H9.2C5.8,26,3,28.8,3,32.3c0,3.5,1.8,6.7,4.8,8.6l22.3,13.9 c1.2,0.7,2.5,1.1,3.8,1.1c1.3,0,2.7-0.4,3.8-1.1L60,40.9c3-1.9,4.8-5.1,4.8-8.6C64.8,28.8,62,26,58.5,26L58.5,26z"/> </g> <g> <rect x="67.5" y="48.1" class="st2" width="25.9" height="6.2"/> <path d="M92.4,49.1v4.2H68.5v-4.2H92.4 M94.4,47.1h-2H68.5h-2v2v4.2v2h2h23.9h2v-2v-4.2V47.1L94.4,47.1z"/> </g> <g> <rect x="67.5" y="58.6" class="st2" width="22.7" height="6.2"/> <path d="M89.2,59.6v4.2H68.5v-4.2H89.2 M91.2,57.6h-2H68.5h-2v2v4.2v2h2h20.7h2v-2v-4.2V57.6L91.2,57.6z"/> </g> <g> <rect x="67.5" y="37.6" class="st2" width="28.5" height="6.2"/> <path d="M95,38.6v4.2H68.5v-4.2H95 M97,36.6h-2H68.5h-2v2v4.2v2h2H95h2v-2v-4.2V36.6L97,36.6z"/> </g> </svg>',d=function(){var n,i,o,r,a,l,u,g,f,h,p,m,v,y,w,C;for(n={id:"generic",name:"Icon",desc:"",init:function(){},usepal:function(e,t){},config:{},support:{svg:!0},license:"CC0",edit:{animation:{"default":e.animation.options[Math.round(2*Math.random())]},scale:{"default":.6},slug:{"default":null}},watch:function(n,i){var o,r,l,u,g,f,h,p,m,v;if(n.upload){if(/image\/svg\+xml/.exec(n.upload.buf))return o=atob(n.upload.buf.split(",")[1]),r=/viewBox\s*=\s*['"](\d+ \d+ \d+ \d+)['"]/.exec(o),r&&(l=r[1].split(" ").map(function(e){return+e.trim()}),n._transformOrigin=[l[0]+.5*l[2],l[1]+.5*l[3]]),c.innerHTML=o,u=c.querySelector("svg"),u.setAttribute("width","100%"),u.setAttribute("height","100%"),d();if(/image\/(png|gif|jpg|jpeg)/.exec(n.upload.buf))return o='<svg><image href="'+n.upload.buf+'" x="0" y="0" width="100" height="100"/></svg>',c.innerHTML=o,d()}return g=(n.animation||{}).className||"ld-static",r=/(ldt?)-(.+)/.exec(g),f=r?[r[1],r[2]]:["ld","static"],h=f[0],p=f[1],m="/css/"+("ld"===h?"loading":"transition")+"/entries/"+p+".css",(null!=(v=s[g])?Promise.resolve(v):t({url:m})).then(function(t){return a.innerHTML="",a.appendChild(document.createTextNode(t.data)),s[g]=t,e.rebind()}),n},dom:function(e){var t,n,o,a,s,d,u,g,f,h,m,v,y,w,C,x,L,k,H,I;t=(n=e._transformOrigin)?n.map(function(e){return e+"px"}).join(" ")+" 0":"50px 50px 0";for(o in a=i.name){for(s=a[o],d=0,g=(u=i.fill[s]||[]).length;g>d;++d)f=u[d],f.setAttribute("fill",e[o]),f.style.fill=e[o];for(d=0,g=(u=i.stroke[s]||[]).length;g>d;++d)f=u[d],f.setAttribute("stroke",e[o]),f.style.stroke=e[o];for(d=0,g=(u=i.stopColor[s]||[]).length;g>d;++d)f=u[d],f.setAttribute("stop-color",e[o]),f.style["stop-color"]=e[o]}for(d=0,g=(a=p).length;g>d;++d)h=a[d],"stop"!==h.nodeName&&(m=(n=h._anigrp)?n:h,m.style["transform-origin"]=t,v=m.getAttribute("class"),v&&m.setAttribute("class",v.replace(/ld(t?-\S+)?/g,"").trim()));if(e.animation){for(y=e.animateTogether?[l]:p,e.grouping&&!e.animateTogether&&(w=function(e){var t,n,i,o,r,a,l,s,c,d,u;for(t=[[],0,!1],n=t[0],i=t[1],o=t[2],r=0,a=(t=e.childNodes).length;a>r;++r)l=t[r],s=w(l),c=s[0],d=s[1],u=s[2],n=n.concat(c),i+=d,o=o||u;if(e._anigrp){if(1>=i)return[e,1,"g"===e.nodeName];if(i>1&&!o&&"g"===e.nodeName)return[e,1,!0]}return[n,i,o]},a=w(l),C=a[0],x=a[1],L=a[2],C.length||(C=[l]),y=C),x=0,d=0,g=y.length;g>d;++d)h=y[d],(e.animateTogether||e.grouping||!~["g","svg"].indexOf(h.nodeName.toLowerCase()))&&(m=(n=h._anigrp)?n:h,m.style["transform-origin"]=t,m.setAttribute("class","ld "+e.animation.className),m.style["animation-duration"]=e.speed+"s",k=e.randomDelay?Math.random():/^ldt-/.exec(e.animation.className)?x/y.length:-(y.length-x)/y.length,k=k*(null!=e.delaySize?e.delaySize:1)*e.speed,m.style["animation-delay"]=k+"s",m.style["animation-direction"]=e.animateReverse?"reverse":"normal",x++);for(d=0,g=y.length;g>d;++d)if(h=y[d],H=h.getAttribute("data-delay-sync"),H&&(I=r.querySelector(H))){for(;I&&!I.classList.contains("ld");)I=I.parentNode;I&&(h.style["animation-delay"]=I.style["animation-delay"])}}return r.style["transform-origin"]=t,r.style.transform="scale("+e.scale+")",c.innerHTML}},"uploader"===stockId&&(n.config.uploader=!0),"uploader"===stockId&&e.user.data&&e.user.data.plan&&(n.edit.upload={type:"upload"}),i={stroke:{},fill:{},color:{},name:{},stopColor:{}},o=c.querySelector("svg"),r=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElement("style"),a.setAttribute("type","text/css"),l=document.createElementNS("http://www.w3.org/2000/svg","g"),u=0,f=(g=Array.from(o.childNodes)).length;f>u;++u)h=g[u],o.removeChild(h),l.appendChild(h);o.appendChild(r),o.appendChild(a),r.appendChild(l),p=Array.from(c.querySelectorAll("*")),m=["polygon","ellipse","rect","circle","line","path","polyline","stop","image","g","clippath"],p.map(function(e){var t,n,o,r,a,l,s,c,d,u,g,f,h,p;if(t=e.nodeName,"stop"!==t){if(e._style=e.getAttribute("style")+";",e._style=e._style.replace(/fill:[^;]+;/,""),e._style=e._style.replace(/stroke:[^;]+;/,""),!in$(e.nodeName.toLowerCase(),m))return;if(n=document.createElementNS("http://www.w3.org/2000/svg","g"),o=window.getComputedStyle(e).clipPath,o&&"none"!==o){for(e._anigrp=e,r=e.childNodes.length-1;r>=0;--r)a=r,l=e.childNodes[a],e.removeChild(l),n.appendChild(l);e.appendChild(n),e._anigrp=n}else"clipPath"===t?e._anigrp=e:(s=e.parentNode,s.insertBefore(n,e),n.appendChild(e),e._anigrp=n)}if(c=window.getComputedStyle(e),d=[c.fill,c.stroke,c["stroke-width"],c["stop-color"]],u=d[0],g=d[1],f=d[2],h=d[3],"g"!==t)if("stop"!==t){if("none"===u||/^\s*url\(/.exec(u)||(((d=i.fill)[p=u||"#000"]||(d[p]=[])).push(e),((d=i.color)[p=u||"#000"]||(d[p]=[])).push(e)),"none"!==g&&f&&!/^\s*url\(/.exec(g))return((d=i.stroke)[p=g||"#000"]||(d[p]=[])).push(e),((d=i.color)[p=g||"#000"]||(d[p]=[])).push(e)}else if("none"!==h)return((d=i.stopColor)[p=h||"#000"]||(d[p]=[])).push(e),((d=i.color)[p=h||"#000"]||(d[p]=[])).push(e)}),v=1,y=[(e.curIcon||{name:"untitled"}).name,function(){var e=[];for(w in i.color)e.push(w);return e}()],y[1].length&&((n.settings||(n.settings={})).pal=y);for(w in g=i.color)C=g[w],n.edit["c"+v]={name:"Color "+v,type:"color","default":w},i.name["c"+v]=w,v++;return e.curIcon&&(n.edit.slug={"default":e.curIcon.slug},n.license=(e.curIcon.license||"CC0").toUpperCase(),n.id=e.curIcon.slug,n.name=e.curIcon.name,n.tags=e.curIcon.tags,n.detail=e.curIcon.detail||{}),n.edit.animation["default"]=e.animation.options[parseInt(.001*(new Date).getTime())%3],e.loadmod(0,n)},d(),e.load=function(n){return e.curIcon=n,t({url:"/s/icon/"+n.slug+".svg",method:"GET"}).then(function(e){var t;return t=e.data,c.innerHTML='<svg><g style="display:none">'+t+"</g></svg>",d(),setTimeout(function(){return c.innerHTML=t,d()},0)})}})),x$.factory("ldi-generic",["$interval"].concat(function(e){return{id:"generic",name:"Icon",desc:"a general icon",init:function(){},usepal:function(e,t){},config:{},support:{svg:!0,repeat:!0,animation:!0},license:"CC0",edit:{},watch:function(e,t){return e},dom:function(){return""}}})),x$.factory("ldi-uploader",["$interval"].concat(function(e){return{id:"uploader",name:"Icon",desc:"a general icon",init:function(){},usepal:function(e,t){},config:{},support:{svg:!0,repeat:!0,animation:!0},license:"CC0",edit:{},watch:function(e,t){return e},dom:function(){return""}}}));